import{T as t,B as e,F as s,P as i,a,S as r,C as n,b as o,W as l,O as d,G as h}from"./vendor.fbad539d.js";function p({sigma:t,rho:e,beta:s},{x:i,y:a,z:r},n){return{x:t*(a-i)*n,y:(i*(e-r)-a)*n,z:(i*a-s*r)*n}}class c{constructor(r,n){let o=[],l=[],d=()=>Math.random(),h=(new t).load("/disc.png");for(let t=0;t<n.num_points;t++){o.push(40*d()-10,40*d()-10,40*d()-10);const t=[255,255,255];l.push(t[0],t[1],t[2])}const p=new e;p.setAttribute("position",new s(o,3)),p.setAttribute("color",new s(l,3));const c=new i({size:n.point_scale,map:h,alphaTest:.5,transparent:!0});c.depthTest=!1,this.points=new a(p,c),this.points.renderOrder=1,r.add(this.points)}get position(){return this.points.geometry.attributes.position}setPoint(t,e){this.position.setXYZ(t,e.x,e.y,e.z)}setColor(t){this.points.material.setValues({color:t})}setSize(t){this.points.material.setValues({size:t})}requestUpdate(){this.position.needsUpdate=!0}}class m{constructor(t,r){const n=3*r.trail_length*r.num_points,o=new Array(n);o.fill(0);let l=[];for(let e=0;e<r.num_points;e++){const t=[255,255,255];l.push(t[0],t[1],t[2])}const d=new e;d.setAttribute("position",new s(o,3)),d.setAttribute("color",new s(l,3));const h=new i({size:r.trail_scale});this.trails=new a(d,h),t.add(this.trails)}get position(){return this.trails.geometry.attributes.position}setPoint(t,e){this.position.setXYZ(t,e.x,e.y,e.z)}setColor(t){this.trails.material.setValues({color:t})}setSize(t){this.trails.material.setValues({size:t})}requestUpdate(){this.position.needsUpdate=!0}dispose(t){t.remove(this.trails)}}class _{constructor(t,e){this.trail_iterator=0,this.params=e,this.scene=new r,this.clock=new n,this.camera=new o(45,window.innerWidth/window.innerHeight,1,500),this.camera.position.set(-80,40,0),this.renderer=new l,this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.setPixelRatio(window.devicePixelRatio),this.controls=new d(this.camera,this.renderer.domElement),this.controls.target.set(0,0,25),t.appendChild(this.renderer.domElement),this.pointHandler=new c(this.scene,e),this.trailHandler=new m(this.scene,e)}update(){const t=this.clock.getDelta()/5*this.params.time_scale,e=this.pointHandler.position;for(let s=0;s<e.count;s++){const i={x:e.getX(s),y:e.getY(s),z:e.getZ(s)},a=p(this.params.vars,i,t);i.x+=a.x,i.y+=a.y,i.z+=a.z,this.pointHandler.setPoint(s,i),this.params.trail_length>0&&(this.trailHandler.setPoint(this.trail_iterator,i),this.trail_iterator++,this.trail_iterator>this.params.num_points*this.params.trail_length&&(this.trail_iterator=0))}this.pointHandler.requestUpdate(),this.trailHandler.requestUpdate(),this.controls.update(),this.renderer.render(this.scene,this.camera)}onWindowResize(){this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight)}updateParams(t){void 0!==t.trail_length?(this.trailHandler.dispose(this.scene),console.log(t.trail_length),t.trail_length>0&&(this.trailHandler=new m(this.scene,t))):void 0!==t.point_color?this.pointHandler.setColor(t.point_color):void 0!==t.point_scale?this.pointHandler.setSize(t.point_scale):void 0!==t.trail_color?this.trailHandler.setColor(t.trail_color):void 0!==t.trail_scale?this.trailHandler.setSize(t.trail_scale):void 0!==t.time_scale&&(this.params.time_scale=t.time_scale)}dispose(t){t.removeChild(this.renderer.domElement)}}const u={num_points:2500,time_scale:1,point_scale:1,point_color:16777215,trail_length:0,trail_scale:.1,trail_color:16777215,vars:{rho:28,sigma:10,beta:8/3}},w=document.getElementById("app"),g={reset:function(){v.dispose(w),v=new _(w,u)}};let v=new _(w,u);const z=new h;z.add(g,"reset"),z.add(u,"num_points").onChange((t=>{v.dispose(w),v=new _(w,u)})),z.add(u,"time_scale",0,2).onChange((t=>{v.updateParams({time_scale:t})})),z.add(u,"point_scale",.001,2,.001).onChange((t=>{v.updateParams({point_scale:t})})),z.addColor(u,"point_color").onChange((t=>{v.updateParams({point_color:t})}));const C=z.addFolder("trail");C.open(),C.add(u,"trail_length",0,1e3,10).onChange((t=>{v.updateParams({trail_length:t,num_points:u.num_points,trail_scale:u.trail_scale})})),C.add(u,"trail_scale",1e-4,1,1e-4).onChange((t=>{v.updateParams({trail_scale:t})})),C.addColor(u,"trail_color").onChange((t=>{v.updateParams({trail_color:t})}));const P=z.addFolder("parameters");function H(){v.onWindowResize()}P.add(u.vars,"sigma").onChange((t=>{v.updateParams({vars:{sigma:t,rho:u.vars.rho,beta:u.vars.beta}})})),P.add(u.vars,"rho").onChange((t=>{v.updateParams({vars:{sigma:u.vars.sigma,rho:t,beta:u.vars.beta}})})),P.add(u.vars,"beta").onChange((t=>{v.updateParams({vars:{sigma:u.vars.sigma,rho:u.vars.rho,beta:t}})})),window.onresize=H,H(),function t(){requestAnimationFrame(t),v.update()}();
